<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单片机原理与应用 - 课程答疑机器人</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.04);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
            min-height: 600px;
            position: relative;
            border: 1px solid #f0f0f0;
        }
        
        /* 标题区域 - 极简风格 */
        .header {
            padding: 30px 30px 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
            background-color: #fff;
        }
        
        .header h1 {
            font-weight: 300;
            font-size: 1.8rem;
            color: #222;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .header .subtitle {
            font-weight: 300;
            font-size: 0.95rem;
            color: #777;
            letter-spacing: 0.5px;
        }
        
        /* 聊天区域 - 大量留白，呼吸感 */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            background-color: #fefefe;
        }
        
        /* 消息样式 */
        .message {
            max-width: 80%;
            padding: 18px 22px;
            border-radius: 4px;
            position: relative;
            animation: fadeIn 0.4s ease-out;
            line-height: 1.7;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            align-self: flex-end;
            background-color: #f0f7ff;
            border-left: 3px solid #4a8cff;
            color: #333;
            box-shadow: 0 2px 8px rgba(74, 140, 255, 0.08);
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: #f9f9f9;
            border-left: 3px solid #e0e0e0;
            color: #333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
        }
        
        .message-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.85rem;
        }
        
        .user-message .message-header {
            justify-content: flex-end;
        }
        
        .bot-icon, .user-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.9rem;
        }
        
        .bot-icon {
            background-color: #f0f0f0;
            color: #666;
        }
        
        .user-icon {
            background-color: #4a8cff;
            color: white;
        }
        
        .message-content {
            font-size: 0.95rem;
        }
        
        .message-content p {
            margin-bottom: 10px;
        }
        
        .message-content p:last-child {
            margin-bottom: 0;
        }
        
        .message-content code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.9em;
        }
        
        .message-content pre {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 12px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 10px 0;
            font-family: monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        /* 输入区域 */
        .input-container {
            padding: 25px 30px;
            border-top: 1px solid #f0f0f0;
            background-color: #fff;
            display: flex;
            align-items: center;
        }
        
        .input-wrapper {
            flex: 1;
            display: flex;
            background-color: #f9f9f9;
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid #eee;
            transition: all 0.3s ease;
        }
        
        .input-wrapper:focus-within {
            border-color: #4a8cff;
            box-shadow: 0 0 0 3px rgba(74, 140, 255, 0.1);
        }
        
        #user-input {
            flex: 1;
            border: none;
            padding: 18px 20px;
            font-size: 0.95rem;
            font-family: 'Noto Sans SC', sans-serif;
            background-color: transparent;
            color: #333;
            outline: none;
            line-height: 1.5;
        }
        
        #send-button {
            background-color: #4a8cff;
            color: white;
            border: none;
            padding: 0 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #send-button:hover {
            background-color: #3a7cff;
        }
        
        /* 课程主题标签 */
        .course-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 25px;
            padding: 0 30px 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .tag {
            padding: 8px 16px;
            background-color: #f5f5f5;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #666;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .tag:hover {
            background-color: #e9e9e9;
            color: #333;
        }
        
        /* 提示信息 */
        .hint {
            text-align: center;
            color: #aaa;
            font-size: 0.85rem;
            padding: 15px;
            font-weight: 300;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                height: 85vh;
                min-height: 500px;
            }
            
            .header {
                padding: 20px 20px 15px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .chat-container {
                padding: 20px;
            }
            
            .message {
                max-width: 90%;
                padding: 15px 18px;
            }
            
            .input-container {
                padding: 20px;
            }
            
            .course-tags {
                padding: 0 20px 15px;
            }
        }
        
        /* 加载动画 */
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background-color: #f9f9f9;
            border-left: 3px solid #e0e0e0;
            border-radius: 4px;
            align-self: flex-start;
            max-width: 80px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #bbb;
            border-radius: 50%;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typingAnimation {
            0%, 80%, 100% { transform: translateY(0); opacity: 0.5; }
            40% { transform: translateY(-5px); opacity: 1; }
        }
        
        /* 原研哉风格装饰元素 */
        .decoration-line {
            position: absolute;
            width: 100%;
            height: 1px;
            background-color: #f0f0f0;
            z-index: -1;
        }
        
        .decoration-line:nth-child(1) {
            top: 20%;
            left: 0;
            width: 80%;
        }
        
        .decoration-line:nth-child(2) {
            top: 50%;
            right: 0;
            width: 60%;
        }
        
        .decoration-line:nth-child(3) {
            bottom: 30%;
            left: 0;
            width: 40%;
        }
    </style>
</head>
<body>
    <!-- 原研哉风格的装饰线条 -->
    <div class="decoration-line"></div>
    <div class="decoration-line"></div>
    <div class="decoration-line"></div>
    
    <div class="container">
        <div class="header">
            <h1>单片机原理与应用 · 课程答疑机器人</h1>
            <div class="subtitle">极简设计 · 纯粹交互 · 专注于单片机知识解答</div>
        </div>
        
        <div class="course-tags">
            <div class="tag" data-question="什么是单片机？">什么是单片机</div>
            <div class="tag" data-question="8051单片机的结构">8051结构</div>
            <div class="tag" data-question="单片机的应用领域">应用领域</div>
            <div class="tag" data-question="单片机与微处理器的区别">与微处理器的区别</div>
            <div class="tag" data-question="单片机编程语言">编程语言</div>
            <div class="tag" data-question="中断系统的工作原理">中断系统</div>
            <div class="tag" data-question="定时器/计数器的应用">定时器/计数器</div>
            <div class="tag" data-question="串行通信接口">串行通信</div>
        </div>
        
        <div class="chat-container" id="chat-container">
            <!-- 初始欢迎消息 -->
            <div class="message bot-message">
                <div class="message-header">
                    <div class="bot-icon">
                        <i class="fas fa-microchip"></i>
                    </div>
                    <div>单片机答疑助手</div>
                </div>
                <div class="message-content">
                    <p>您好！我是单片机原理与应用课程的答疑助手。</p>
                    <p>我可以为您解答关于单片机结构、工作原理、编程应用等相关问题。例如：</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>单片机的基本概念和分类</li>
                        <li>8051单片机的内部结构</li>
                        <li>汇编语言与C语言编程</li>
                        <li>中断系统、定时器、串行通信等外围设备</li>
                        <li>单片机在实际项目中的应用</li>
                    </ul>
                    <p>请直接输入您的问题，或点击上方标签快速提问。</p>
                </div>
            </div>
        </div>
        
        <div class="input-container">
            <div class="input-wrapper">
                <input type="text" id="user-input" placeholder="输入关于单片机的问题，例如：单片机的基本组成有哪些？" autocomplete="off">
                <button id="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        
        <div class="hint">
            基于原研哉设计理念：极简、留白、呼吸感 | 专注于单片机知识解答
        </div>
    </div>

    <script>
        // 获取DOM元素
        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const tags = document.querySelectorAll('.tag');
        
        // 预定义问题与答案
        const qaDatabase = {
            "什么是单片机？": "单片机（Microcontroller Unit，MCU）是一种集成计算机核心部件（CPU、RAM、ROM、I/O接口、定时器/计数器等）于单一芯片上的微型计算机系统。它广泛应用于嵌入式系统中，具有体积小、功耗低、可靠性高、成本低廉等特点。",
            
            "8051单片机的结构": "8051单片机的基本结构包括：\n1. 8位中央处理器（CPU）\n2. 4KB程序存储器（ROM）\n3. 128B数据存储器（RAM）\n4. 4个8位并行I/O端口（P0-P3）\n5. 2个16位定时器/计数器\n6. 1个全双工串行通信接口\n7. 5个中断源，2级优先权\n8. 时钟电路和振荡器",
            
            "单片机的应用领域": "单片机广泛应用于：\n• 家用电器：空调、洗衣机、微波炉等的控制系统\n• 工业控制：PLC、数控机床、智能仪表\n• 汽车电子：发动机控制、安全系统、车载娱乐\n• 医疗设备：监护仪、输液泵、便携式检测设备\n• 通信设备：路由器、交换机、手机模块\n• 物联网设备：智能家居、环境监测、可穿戴设备",
            
            "单片机与微处理器的区别": "主要区别：\n1. 集成度：单片机将CPU、RAM、ROM、I/O等集成在单一芯片上；微处理器通常只有CPU，需要外接存储器和I/O接口\n2. 应用方向：单片机主要用于控制，强调实时性和专用性；微处理器用于通用计算，强调处理能力\n3. 功耗：单片机功耗通常较低，适合嵌入式应用；微处理器功耗相对较高\n4. 成本：单片机成本较低，适合大批量生产；微处理器系统成本较高",
            
            "单片机编程语言": "单片机编程主要使用：\n1. 汇编语言：直接控制硬件，执行效率高，但可读性差，移植性差\n2. C语言：最常用的单片机高级语言，兼顾效率和可移植性\n3. C++：部分高端单片机支持面向对象编程\n4. 其他语言：如Python（MicroPython）、Arduino语言（基于C/C++）等\n\n初学者通常从C语言开始学习单片机编程。",
            
            "中断系统的工作原理": "中断是单片机响应外部或内部事件的一种机制。工作原理：\n1. 中断源发出请求信号\n2. CPU暂停当前程序执行，保存断点\n3. 转向执行中断服务程序（ISR）\n4. 执行完毕后恢复原程序继续执行\n\n中断优先级和嵌套机制允许重要事件优先处理。",
            
            "定时器/计数器的应用": "定时器/计数器的主要应用：\n1. 定时：产生精确的时间延迟，用于定时采样、PWM波形生成等\n2. 计数：对外部脉冲计数，用于测量频率、转速等\n3. 波特率发生器：为串行通信提供精确的波特率时钟\n4. 事件捕捉：记录外部事件发生的时间点\n\n在8051单片机中，通常有2个16位定时器/计数器（T0和T1）。",
            
            "串行通信接口": "单片机串行通信主要有：\n1. UART：异步串行通信，最常用的点对点通信方式\n2. SPI：同步串行外设接口，高速全双工，主从模式\n3. I2C：两线制同步串行总线，多主多从，节省引脚\n\n串行通信相比并行通信节省I/O资源，适合远距离通信。",
            
            "单片机的基本组成有哪些？": "单片机的基本组成包括：\n1. 中央处理器（CPU）：执行指令，控制操作\n2. 存储器：ROM（程序存储器）和RAM（数据存储器）\n3. 输入/输出接口：与外部设备通信的端口\n4. 定时器/计数器：提供定时和计数功能\n5. 中断系统：处理紧急事件\n6. 时钟电路：提供工作时序基准\n7. 总线：连接各部件的数据、地址和控制通道",
            
            "如何学习单片机编程？": "学习单片机编程的建议路径：\n1. 掌握电子基础：了解电路原理、数字电路\n2. 学习C语言：掌握基本语法和数据结构\n3. 理解单片机结构：学习特定单片机（如8051）的架构\n4. 实践开发：使用开发板进行实验，从LED控制开始\n5. 学习外围设备：掌握定时器、中断、串口等应用\n6. 完成项目：通过实际项目巩固知识，如智能小车、温控系统等",
            
            "复位电路的作用是什么？": "复位电路的作用是在单片机上电或异常时，将内部寄存器恢复到初始状态，使程序从起始地址开始执行。常见的复位方式有上电复位、手动复位和看门狗复位。",
            
            "什么是时钟周期和机器周期？": "时钟周期是振荡器产生的一个脉冲信号的时间。机器周期是单片机完成一个基本操作所需的时间，通常由多个时钟周期组成。在8051单片机中，一个机器周期等于12个时钟周期。"
        };
        
        // 添加消息到聊天界面
        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const iconClass = isUser ? 'user-icon' : 'bot-icon';
            const iconSymbol = isUser ? '<i class="fas fa-user"></i>' : '<i class="fas fa-microchip"></i>';
            const senderName = isUser ? '您' : '单片机答疑助手';
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="${iconClass}">${iconSymbol}</div>
                    <div>${senderName}</div>
                </div>
                <div class="message-content">${formatMessage(content)}</div>
            `;
            
            chatContainer.appendChild(messageDiv);
            // 滚动到底部
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // 格式化消息内容（处理换行和代码）
        function formatMessage(text) {
            // 将换行符转换为段落
            let formattedText = text.replace(/\n/g, '</p><p>');
            // 将 • 开头的行转换为列表项
            formattedText = formattedText.replace(/•\s+(.+?)(?=\n|$)/g, '<li>$1</li>');
            // 如果包含列表项，添加ul标签
            if (formattedText.includes('<li>')) {
                formattedText = formattedText.replace(/<p><li>/g, '<p><ul><li>');
                formattedText = formattedText.replace(/<\/li><\/p>/g, '</li></ul></p>');
            }
            
            return `<p>${formattedText}</p>`;
        }
        
        // 显示机器人正在输入的指示
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // 隐藏机器人正在输入的指示
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        // 获取机器人回答
        function getBotResponse(question) {
            // 查找匹配的问题
            let response = qaDatabase[question];
            
            // 如果没有完全匹配的问题，尝试查找包含关键词的问题
            if (!response) {
                const lowerQuestion = question.toLowerCase();
                for (const key in qaDatabase) {
                    if (lowerQuestion.includes(key.toLowerCase()) || key.toLowerCase().includes(lowerQuestion)) {
                        response = qaDatabase[key];
                        break;
                    }
                }
            }
            
            // 如果还是没有找到，返回默认回复
            if (!response) {
                response = "这是一个很好的问题！关于单片机" + question + "，我建议您：\n1. 查阅教材中关于该内容的章节\n2. 在实验板上进行实际操作验证\n3. 参考相关的技术文档和手册\n\n如果您能提供更具体的问题描述，我可以给出更精确的解答。";
            }
            
            return response;
        }
        
        // 处理用户发送消息
        function handleUserMessage() {
            const question = userInput.value.trim();
            if (!question) return;
            
            // 添加用户消息
            addMessage(question, true);
            
            // 清空输入框
            userInput.value = '';
            
            // 显示机器人正在输入
            showTypingIndicator();
            
            // 模拟机器人思考时间
            setTimeout(() => {
                hideTypingIndicator();
                const response = getBotResponse(question);
                addMessage(response, false);
            }, 1000 + Math.random() * 1500);
        }
        
        // 事件监听
        sendButton.addEventListener('click', handleUserMessage);
        
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleUserMessage();
            }
        });
        
        // 标签点击事件
        tags.forEach(tag => {
            tag.addEventListener('click', () => {
                const question = tag.getAttribute('data-question');
                userInput.value = question;
                // 自动发送
                setTimeout(() => {
                    handleUserMessage();
                }, 100);
            });
        });
        
        // 初始示例问题
        setTimeout(() => {
            userInput.value = "单片机的基本组成有哪些？";
        }, 1500);
    </script>
</body>
</html>